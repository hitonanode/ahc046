







<!DOCTYPE html>
<html>
<head>
	<title>A - Skating with Blocks</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="Content-Language" content="ja">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<meta name="format-detection" content="telephone=no">
	<meta name="google-site-verification" content="nXGC_JxO0yoP1qBzMnYD_xgufO6leSLw1kyNo2HZltM" />

	
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-RC512FD18N"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('set', 'user_properties', {
			
				'login_status': 'logged_in',
			
		});
		gtag('config', 'G-RC512FD18N');
	</script>

	
	<meta name="description" content="プログラミング初級者から上級者まで楽しめる、競技プログラミングコンテストサイト「AtCoder」。オンラインで毎週開催プログラミングコンテストを開催しています。競技プログラミングを用いて、客観的に自分のスキルを計ることのできるサービスです。">
	<meta name="author" content="AtCoder Inc.">

	<meta property="og:site_name" content="AtCoder">
	
	<meta property="og:title" content="A - Skating with Blocks" />
	<meta property="og:description" content="プログラミング初級者から上級者まで楽しめる、競技プログラミングコンテストサイト「AtCoder」。オンラインで毎週開催プログラミングコンテストを開催しています。競技プログラミングを用いて、客観的に自分のスキルを計ることのできるサービスです。" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://atcoder.jp/contests/ahc046/tasks/ahc046_a" />
	<meta property="og:image" content="https://img.atcoder.jp/assets/atcoder.png" />
	<meta name="twitter:card" content="summary" />
	<meta name="twitter:site" content="@atcoder" />
	
	<meta property="twitter:title" content="A - Skating with Blocks" />

	<link href="//fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="//img.atcoder.jp/public/d49c595/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="//img.atcoder.jp/public/d49c595/css/base.css">
	<link rel="shortcut icon" type="image/png" href="//img.atcoder.jp/assets/favicon.png">
	<link rel="apple-touch-icon" href="//img.atcoder.jp/assets/atcoder.png">
	<script src="//img.atcoder.jp/public/d49c595/js/lib/jquery-1.9.1.min.js"></script>
	<script src="//img.atcoder.jp/public/d49c595/js/lib/bootstrap.min.js"></script>
	<script src="//img.atcoder.jp/public/d49c595/js/cdn/js.cookie.min.js"></script>
	<script src="//img.atcoder.jp/public/d49c595/js/cdn/moment.min.js"></script>
	<script src="//img.atcoder.jp/public/d49c595/js/cdn/moment_js-ja.js"></script>
	<script>
		var LANG = "ja";
		var userScreenName = "hitonanode";
		var csrfToken = "J2bPvEpthKHT+skD+MByj3GLnLWRkMCq9jj51qX/U0I="
	</script>
	<script src="//img.atcoder.jp/public/d49c595/js/utils.js"></script>
	
	
		<script src="//img.atcoder.jp/public/d49c595/js/contest.js"></script>
		<link href="//img.atcoder.jp/public/d49c595/css/contest.css" rel="stylesheet" />
		<script>
			var contestScreenName = "ahc046";
			var remainingText = "残り時間";
			var countDownText = "開始まであと";
			var startTime = moment("2025-04-26T15:00:00+09:00");
			var endTime = moment("2025-04-26T19:00:00+09:00");
		</script>
		<style>.bp_h2 {
    font-size: 1.7em;
    font-weight: bold;
    color: white;
    background: linear-gradient(to right, #95262A, #95262A, white);
    padding-left: 10px;
    margin-top: 60px;
}

.bp_h3 {
    font-size: 1.4em;
    font-weight: bold;
    margin-top: 20px;
}

.bp_h4 {
    font-size: 1.1em;
    font-weight: bold;
    margin-top: 10px;
}

.bp_border {
    height: 10px;
    background: linear-gradient(to right, #95262A, #95262A, white);
    border: none;
    color: 95262A;
    margin-top: 30px;
}

.bp_padding {
    padding-left: 15px;
    padding-right: 15px;
}

.bp_table {
    margin: auto;
    width: 70%;
    text-align: center;
    border-collapse: collapse;
    border-spacing: 0;
   }
   .bp_table th {
    text-align: center;
    padding: 10px;
    background: #dddddd;
    border: solid 1px #aaaaaa;
   }
   .bp_table td {
    text-align: center;
    padding: 10px;
    border: solid 1px #aaaaaa;
   }

.bp_img{
    width: 100%;
}
</style>
	
	
		<link href="//img.atcoder.jp/public/d49c595/css/cdn/select2.min.css" rel="stylesheet" />
		<link href="//img.atcoder.jp/public/d49c595/css/cdn/select2-bootstrap.min.css" rel="stylesheet" />
		<script src="//img.atcoder.jp/public/d49c595/js/lib/select2.min.js"></script>
	
	
		<script src="//img.atcoder.jp/public/d49c595/js/ace/ace.js"></script>
		<script src="//img.atcoder.jp/public/d49c595/js/ace/ext-language_tools.js"></script>
	
	
		<script src="//img.atcoder.jp/public/d49c595/js/cdn/run_prettify.js"></script>
	
	
		<link rel="stylesheet" href="//img.atcoder.jp/public/d49c595/css/cdn/katex.min.css">
		<script defer src="//img.atcoder.jp/public/d49c595/js/cdn/katex.min.js"></script>
		<script defer src="//img.atcoder.jp/public/d49c595/js/cdn/auto-render.min.js"></script>
		<script>$(function(){$('var').each(function(){var html=$(this).html().replace(/<sub>/g,'_{').replace(/<\/sub>/g,'}');$(this).html('\\('+html+'\\)');});});</script>
		<script>
			var katexOptions = {
				delimiters: [
					{left: "$$", right: "$$", display: true},
					
					{left: "\\(", right: "\\)", display: false},
					{left: "\\[", right: "\\]", display: true}
				],
      	ignoredTags: ["script", "noscript", "style", "textarea", "code", "option"],
				ignoredClasses: ["prettyprint", "source-code-for-copy"],
				throwOnError: false
			};
			document.addEventListener("DOMContentLoaded", function() { renderMathInElement(document.body, katexOptions);});
		</script>
	
	
	
	
	
	
	
	
	
	<script src="//img.atcoder.jp/public/d49c595/js/base.js"></script>
</head>

<body>

<script type="text/javascript">
	var __pParams = __pParams || [];
	__pParams.push({client_id: '468', c_1: 'atcodercontest', c_2: 'ClientSite'});
</script>
<script type="text/javascript" src="https://cdn.d2-apps.net/js/tr.js" async></script>


<div id="modal-contest-start" class="modal fade" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">コンテスト開始</h4>
			</div>
			<div class="modal-body">
				<p>BrainPad プログラミングコンテスト 2025 （AtCoder Heuristic Contest 046）が開始されました。</p>
			</div>
			<div class="modal-footer">
				
					<a class="btn btn-primary" href='/contests/ahc046/tasks'>問題一覧ページへ移動</a>
				
			</div>
		</div>
	</div>
</div>
<div id="modal-contest-end" class="modal fade" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">コンテスト終了</h4>
			</div>
			<div class="modal-body">
				<p>BrainPad プログラミングコンテスト 2025 （AtCoder Heuristic Contest 046）は終了しました。</p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
			</div>
		</div>
	</div>
</div>
<div id="main-div" class="float-container">


	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
					<span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/home"></a>
			</div>
			<div class="collapse navbar-collapse" id="navbar-collapse">
				<ul class="nav navbar-nav">
				
					<li><a class="contest-title" href="/contests/ahc046">BrainPad プログラミングコンテスト 2025 （AtCoder Heuristic Contest 046）</a></li>
				
				</ul>
				<ul class="nav navbar-nav navbar-right">
					
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
							<img src='//img.atcoder.jp/assets/top/img/flag-lang/ja.png'> 日本語 <span class="caret"></span>
						</a>
						<ul class="dropdown-menu">
							<li><a href="/contests/ahc046/tasks/ahc046_a?lang=ja"><img src='//img.atcoder.jp/assets/top/img/flag-lang/ja.png'> 日本語</a></li>
							<li><a href="/contests/ahc046/tasks/ahc046_a?lang=en"><img src='//img.atcoder.jp/assets/top/img/flag-lang/en.png'> English</a></li>
						</ul>
					</li>
					
					
						<li class="dropdown">
							<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
								<span class="glyphicon glyphicon-cog" aria-hidden="true"></span> hitonanode (Contestant) <span class="caret"></span>
							</a>
							<ul class="dropdown-menu">
								<li><a href="/users/hitonanode"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> マイプロフィール</a></li>
								<li class="divider"></li>
								<li><a href="/settings"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> 基本設定</a></li>
								<li><a href="/settings/icon"><span class="glyphicon glyphicon-picture" aria-hidden="true"></span> アイコン設定</a></li>
								<li><a href="/settings/password"><span class="glyphicon glyphicon-lock" aria-hidden="true"></span> パスワードの変更</a></li>
								<li><a href="/settings/fav"><span class="glyphicon glyphicon-star" aria-hidden="true"></span> お気に入り管理</a></li>
								
								
								
								<li class="divider"></li>
								<li><a href="javascript:void(form_logout.submit())"><span class="glyphicon glyphicon-log-out" aria-hidden="true"></span> ログアウト</a></li>
							</ul>
						</li>
					
				</ul>
			</div>
		</div>
	</nav>

	<form method="POST" name="form_logout" action="/logout?continue=https%3A%2F%2Fatcoder.jp%2Fcontests%2Fahc046%2Ftasks%2Fahc046_a">
		<input type="hidden" name="csrf_token" value="J2bPvEpthKHT&#43;skD&#43;MByj3GLnLWRkMCq9jj51qX/U0I=" />
	</form>
	<div id="main-container" class="container"
		 	style="padding-top:50px;">
		


<div class="row">
	<div id="contest-nav-tabs" class="col-sm-12 mb-2 cnvtb-fixed">
	<div>
		<small class="contest-duration">
			
				コンテスト時間:
				<a href='http://www.timeanddate.com/worldclock/fixedtime.html?iso=20250426T1500&p1=248' target='blank'><time class='fixtime fixtime-full'>2025-04-26 15:00:00+0900</time></a> ~ <a href='http://www.timeanddate.com/worldclock/fixedtime.html?iso=20250426T1900&p1=248' target='blank'><time class='fixtime fixtime-full'>2025-04-26 19:00:00+0900</time></a> 
				(240分)
			
		</small>
		<small class="back-to-home pull-right"><a href="/home">AtCoderホームへ戻る</a></small>
	</div>
	<ul class="nav nav-tabs">
		<li><a href="/contests/ahc046"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> トップ</a></li>
		
			<li class="active"><a href="/contests/ahc046/tasks"><span class="glyphicon glyphicon-tasks" aria-hidden="true"></span> 問題</a></li>
		

		
			<li><a href="/contests/ahc046/clarifications"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> 質問 <span id="clar-badge" class="badge" ></span></a></li>
		

		
			<li><a href="/contests/ahc046/submit?taskScreenName=ahc046_a"><span class="glyphicon glyphicon-send" aria-hidden="true"></span> 提出</a></li>
		

		
			<li>
				<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-list" aria-hidden="true"></span> 提出結果<span class="caret"></span></a>
				<ul class="dropdown-menu">
					
					
						<li><a href="/contests/ahc046/submissions/me"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> 自分の提出</a></li>
						
						
					
				</ul>
			</li>
		

		
			
				
					<li><a href="/contests/ahc046/standings"><span class="glyphicon glyphicon-sort-by-attributes-alt" aria-hidden="true"></span> 順位表</a></li>
				
			
		

		
			<li><a href="/contests/ahc046/custom_test"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> コードテスト</a></li>
		

		
		

		<li class="pull-right"><a id="fix-cnvtb" href="javascript:void(0)"><span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span></a></li>
	</ul>
</div>
	<div class="col-sm-12">
		<span class="h2">
			A - Skating with Blocks
			
		</span>
		<span id="task-lang-btn" class="pull-right"><span data-lang="ja"><img src='//img.atcoder.jp/assets/top/img/flag-lang/ja.png'></span> / <span data-lang="en"><img src='//img.atcoder.jp/assets/top/img/flag-lang/en.png'></span></span>
		<script>
			$(function() {
				var ts = $('#task-statement span.lang');
				if (ts.children('span').size() <= 1) {
					$('#task-lang-btn').hide();
					ts.children('span').show();
					return;
				}
				var REMEMBER_LB = 5;
				var LS_KEY = 'task_lang';
				var taskLang = getLS(LS_KEY) || '';
				var changeTimes = 0;
				if (taskLang == 'ja' || taskLang == 'en') {
					changeTimes = REMEMBER_LB;
				} else {
					var changeTimes = parseInt(taskLang, 10);
					if (isNaN(changeTimes)) {
						changeTimes = 0;
						delLS(LS_KEY);
					}
					changeTimes++;
					taskLang = LANG;
				}
				ts.children('span.lang-' + taskLang).show();

				$('#task-lang-btn span').click(function() {
					var l = $(this).data('lang');
					ts.children('span').hide();
					ts.children('span.lang-' + l).show();
					if (changeTimes < REMEMBER_LB) setLS(LS_KEY, changeTimes);
					else setLS(LS_KEY, l);
				});
			});
		</script>
		<hr/>
		<p>
			実行時間制限: 2 sec / メモリ制限: 1024 MB
			
			
		</p>

		<div id="task-statement">
			


	
	

			<span class="lang">
<span class="lang-ja">

<div class="part">
<section>
<h3>問題文</h3><p><var>N \times N</var> のマス目からなるスケートリンクがある。
左上のマスの座標を <var>(0,0)</var> とし、下方向に <var>i</var> マス、右方向に <var>j</var> マス進んだ位置のマスの座標を <var>(i,j)</var> とする。
<var>N \times N</var> マスの外部はすべてブロックで覆われており、通過できない。
初期状態では、<var>N \times N</var> マスの内部にブロックは存在しない。</p>
<p>あなたは初期位置 <var>(i_0, j_0)</var> におり、指定された目的地 <var>(i_1, j_1), \dots, (i_{M-1}, j_{M-1})</var> をこの順番で訪れたい。</p>
<p>各ターンでは、上下左右のいずれかの方向を指定し、以下のいずれかの行動を 1 つ選んで実行できる。</p>
<ul>
<li><strong>移動</strong>：指定した方向に隣接するマスへ 1 マス移動する。移動先がブロックであってはならない。</li>
<li><strong>滑走</strong>：指定した方向へ、ブロックにぶつかるまで直線的に滑走する。</li>
<li><strong>変更</strong>：指定した方向に隣接するマスに対し、ブロックが置かれていなければ設置し、すでに置かれていれば除去する。<var>N \times N</var> マスの外部は指定できない。なお、現在の目的地や将来の目的地にブロックを設置することも可能であるが、その場合、そのマスを訪れるにはブロックを除去する必要がある。</li>
</ul>
<p>「滑走」によって目的地の上を通過した場合、そのマスを訪れたとはみなされない。目的地を訪れたと判定されるには、「移動」でそのマスに到達するか、「滑走」でそのマスに停止する必要がある。</p>
<p>目的地は指定された順番通りに訪れる必要がある。順番よりも後の目的地を先に通過しても、その時点では訪れたとはみなされない。順番が来たときに、あらためてそのマスを訪れる必要がある。</p>
<p>行動は最大 <var>2NM</var> ターンまで行える。
出来る限り少ないターン数ですべての目的地を指定された順に訪れよ。</p>
</section>
</div>

<div class="part">
<section>
<h3>得点</h3><p>出力した行動列の長さを <var>T</var>、訪れることが出来た目的地の数を <var>m</var> としたとき、以下のスコアが得られる。</p>
<ul>
<li><var>m&lt;M-1</var> の場合、<var>m+1</var></li>
<li><var>m=M-1</var> の場合、<var>M+2NM-T</var></li>
</ul>
<p>合計で 150 個のテストケースがあり、各テストケースの得点の合計が提出の得点となる。
一つ以上のテストケースで不正な出力や制限時間超過をした場合、提出全体の判定が<span class='label label-warning' data-toggle='tooltip' data-placement='top' title="不正解">WA</span>や<span class='label label-warning' data-toggle='tooltip' data-placement='top' title="実行時間制限超過">TLE</span>となる。
コンテスト時間中に得た最高得点で最終順位が決定され、コンテスト終了後のシステムテストは行われない。 同じ得点を複数の参加者が得た場合、提出時刻に関わらず同じ順位となる。</p>
</section>
</div>

<hr />
<div class="io-style">
<div class="part">
<section>
<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>
<pre><var>N</var> <var>M</var>
<var>i_0</var> <var>j_0</var>
<var>\vdots</var>
<var>i_{M-1}</var> <var>j_{M-1}</var>
</pre>
<ul>
<li>全てのテストケースにおいて、<var>N=20</var>、<var>M=40</var> に固定されている。</li>
<li>初期位置および目的地の座標 <var>(i_k, j_k)</var> は、<var>0 \leq i_k, j_k \leq N-1</var> を満たす整数であり、すべて相異なる。</li>
</ul>
</section>
</div>

<div class="part">
<section>
<h3>出力</h3><p>各ターンに選択した行動と方向を、以下のようにアルファベット1文字ずつで表す。</p>
<p><strong>行動</strong></p>
<ul>
<li>移動: <code>M</code></li>
<li>滑走: <code>S</code></li>
<li>変更: <code>A</code></li>
</ul>
<p><strong>方向</strong></p>
<ul>
<li>上: <code>U</code></li>
<li>下: <code>D</code></li>
<li>左: <code>L</code></li>
<li>右: <code>R</code></li>
</ul>
<p><var>t</var> ターン目 (<var>t = 0, 1, \dots, T - 1</var>) の行動と方向をそれぞれ <var>a_t</var>, <var>d_t</var> としたとき、以下の形式で標準出力に出力せよ。</p>
<pre><var>a_0</var> <var>d_0</var>
<var>\vdots</var>
<var>a_{T-1}</var> <var>d_{T-1}</var>
</pre>
<p><a href="https://img.atcoder.jp/ahc046/EuNd3uow.html?lang=ja&seed=0&output=sample">例を見る</a></p>
</section>
</div>

<div class="part">
<section>
<h3>入力生成方法</h3><p>初期位置および目的マスは、以下の手順に従って生成される。</p>
<p>まず、<var>N^2</var> 個のすべてのマスの座標をランダムな順番に並び替える。
この並び替えた座標列のうち、先頭から <var>M</var> 個を順に <var>(i_0, j_0), (i_1, j_1), \dots, (i_{M-1}, j_{M-1})</var> として採用する。</p>
</section>
</div>

<div class="part">
<section>
<h3>ツール(入力ジェネレータ・ビジュアライザ)</h3><ul>
<li><a href="https://img.atcoder.jp/ahc046/EuNd3uow.html?lang=ja">Web版</a>: ローカル版より高性能でアニメーション表示と手動プレイが可能です。</li>
<li><a href="https://img.atcoder.jp/ahc046/EuNd3uow.zip">ローカル版</a>: 使用するには<a href="https://www.rust-lang.org/ja">Rust言語</a>のコンパイル環境をご用意下さい。<ul>
<li><a href="https://img.atcoder.jp/ahc046/EuNd3uow_windows.zip">Windows用のコンパイル済みバイナリ</a>: Rust言語の環境構築が面倒な方は代わりにこちらをご利用下さい。</li>
</ul>
</li>
</ul>
<p>コンテスト期間中に、ビジュアライズ結果の共有や、解法・考察に関する言及は禁止されています。ご注意下さい。</p>
</section>
</div>
</div>

<hr />
<div class="part">
<section>
<h3>入力例 1</h3><pre style="max-height:200px;overflow-y:scroll">20 40
3 7
14 16
19 19
0 8
0 10
17 11
11 7
19 12
10 12
5 4
13 5
19 10
19 14
1 19
8 5
6 9
9 3
10 0
8 7
17 17
4 2
1 13
9 17
13 4
9 14
19 13
16 9
8 17
10 18
14 3
14 13
18 19
3 14
8 13
7 9
12 18
8 6
10 7
12 1
5 17
</pre>
</section>
</div>

<div class="part">
<section>
<h3>出力例 1</h3><pre style="max-height:200px;overflow-y:scroll">S D
M U
A D
M U
M U
M U
M U
S R
M L
M L
M L
S D
S R
S L
S U
M R
M R
</pre></section>
</div>
</span>
<span class="lang-en">

<div class="part">
<section>
<h3>Problem Statement</h3><p>There is a skating rink consisting of <var>N \times N</var> squares.
Let <var>(0, 0)</var> be the coordinates of the top-left square, and <var>(i, j)</var> be the coordinates of the square located <var>i</var> squares down and <var>j</var> squares to the right from there.
All squares outside the <var>N \times N</var> area are covered with blocks and are impassable.
Initially, there are no blocks inside the <var>N \times N</var> area.</p>
<p>You start at the initial position <var>(i_0, j_0)</var> and must visit the specified target squares <var>(i_1, j_1), \dots, (i_{M-1}, j_{M-1})</var> in the given order.</p>
<p>At each turn, you may choose one of the four cardinal directions and perform one of the following actions:</p>
<ul>
<li><strong>Move</strong>: Move one square in the specified direction. You cannot move into a square containing a block.</li>
<li><strong>Slide</strong>: Continue sliding in the specified direction until you hit a block.</li>
<li><strong>Alter</strong>: Place a block on the adjacent square in the specified direction if it does not already contain one; otherwise, remove the existing block.
  You may not specify a square outside the <var>N \times N</var> area.
  It is also allowed to place a block on a current or future target square; however, you must remove the block in order to visit that square.</li>
</ul>
<p>If you slide over a target square without stopping on it, it is <strong>not</strong> considered visited.
A target square is considered visited only if you either stop on it after a <strong>Slide</strong>, or move onto it directly via a <strong>Move</strong>.</p>
<p>You must visit the target squares in the given order.
Even if you pass over a later target square before visiting earlier ones, it is not considered visited at that time. You will need to visit it again when its turn in the sequence arrives.</p>
<p>You may perform at most <var>2NM</var> actions.
Visit all target squares in the specified order using as few turns as possible.</p>
</section>
</div>

<div class="part">
<section>
<h3>Scoring</h3><p>Let <var>T</var> be the length of the output action sequence, and <var>m</var> be the number of target squares successfully visited.
Then, you will obtain the following score.</p>
<ul>
<li>If <var>m&lt;M-1</var>, <var>m+1</var></li>
<li>If <var>m=M-1</var>, <var>M+2NM-T</var></li>
</ul>
<p>There are <var>150</var> test cases, and the score of a submission is the total score for each test case.
If your submission produces an illegal output or exceeds the time limit for some test cases, the submission itself will be judged as <span class='label label-warning' data-toggle='tooltip' data-placement='top' title="Wrong Answer">WA</span> or <span class='label label-warning' data-toggle='tooltip' data-placement='top' title="Time Limit Exceeded">TLE</span> , and the score of the submission will be zero.
The highest score obtained during the contest will determine the final ranking, and there will be no system test after the contest.
If more than one participant gets the same score, they will be ranked in the same place regardless of the submission time.</p>
</section>
</div>

<hr />
<div class="io-style">
<div class="part">
<section>
<h3>Input</h3><p>Input is given from Standard Input in the following format:</p>
<pre><var>N</var> <var>M</var>
<var>i_0</var> <var>j_0</var>
<var>\vdots</var>
<var>i_{M-1}</var> <var>j_{M-1}</var>
</pre>
<ul>
<li>In all test cases, <var>N = 20</var> and <var>M = 40</var> are fixed.</li>
<li>The coordinates <var>(i_k, j_k)</var> of the initial position and each target square are integers satisfying <var>0 \leq i_k, j_k \leq N-1</var>, and all coordinates are distinct.</li>
</ul>
</section>
</div>

<div class="part">
<section>
<h3>Output</h3><p>At each turn, represent the selected action and direction using a single uppercase alphabet letter as follows.</p>
<p><strong>Actions</strong></p>
<ul>
<li>Move: <code>M</code></li>
<li>Slide: <code>S</code></li>
<li>Alter: <code>A</code></li>
</ul>
<p><strong>Directions</strong></p>
<ul>
<li>Up: <code>U</code></li>
<li>Down: <code>D</code></li>
<li>Left: <code>L</code></li>
<li>Right: <code>R</code></li>
</ul>
<p>Let <var>a_t</var> and <var>d_t</var> denote the action and direction selected at turn <var>t</var> (<var>t = 0, 1, \dots, T-1</var>), respectively.<br />
Then, output to Standard Output in the following format:</p>
<pre><var>a_0</var> <var>d_0</var>
<var>\vdots</var>
<var>a_{T-1}</var> <var>d_{T-1}</var>
</pre>
<p><a href="https://img.atcoder.jp/ahc046/EuNd3uow.html?lang=en&seed=0&output=sample">Show example</a></p>
</section>
</div>

<div class="part">
<section>
<h3>Input Generation</h3><p>The initial position and the target squares are generated according to the following procedure.</p>
<p>First, randomly shuffle the coordinates of all <var>N^2</var> squares.
Then, take the first <var>M</var> coordinates from the shuffled list and assign them sequentially as <var>(i_0, j_0), (i_1, j_1), \dots, (i_{M-1}, j_{M-1})</var>.</p>
</section>
</div>

<div class="part">
<section>
<h3>Tools (Input generator and visualizer)</h3><ul>
<li><a href="https://img.atcoder.jp/ahc046/EuNd3uow.html?lang=en">Web version</a>: This is more powerful than the local version providing animations and manual play.</li>
<li><a href="https://img.atcoder.jp/ahc046/EuNd3uow.zip">Local version</a>: You need a compilation environment of <a href="https://www.rust-lang.org/">Rust language</a>.<ul>
<li><a href="https://img.atcoder.jp/ahc046/EuNd3uow_windows.zip">Pre-compiled binary for Windows</a>: If you are not familiar with the Rust language environment, please use this instead.</li>
</ul>
</li>
</ul>
<p>Please be aware that sharing visualization results or discussing solutions/ideas during the contest is prohibited.</p>
</section>
</div>
</div>

<hr />
<div class="part">
<section>
<h3>Sample Input 1</h3><pre style="max-height:200px;overflow-y:scroll">20 40
3 7
14 16
19 19
0 8
0 10
17 11
11 7
19 12
10 12
5 4
13 5
19 10
19 14
1 19
8 5
6 9
9 3
10 0
8 7
17 17
4 2
1 13
9 17
13 4
9 14
19 13
16 9
8 17
10 18
14 3
14 13
18 19
3 14
8 13
7 9
12 18
8 6
10 7
12 1
5 17
</pre>
</section>
</div>

<div class="part">
<section>
<h3>Sample Output 1</h3><pre style="max-height:200px;overflow-y:scroll">S D
M U
A D
M U
M U
M U
M U
S R
M L
M L
M L
S D
S R
S L
S U
M R
M R
</pre></section>
</div>
</span>
</span>

		</div>

		

		
		<hr/>
		<form class="form-horizontal form-code-submit" action="/contests/ahc046/submit" method="POST">
			<input type="hidden" name="data.TaskScreenName" value="ahc046_a" />
			
			<div class="form-group ">
				<label class="control-label col-sm-3 col-md-2" for="select-lang">言語</label>
				<div id="select-lang" class="col-sm-5" data-name="data.LanguageId">
					<select class="form-control current" data-placeholder="-" name="data.LanguageId" required>
						<option></option>
						
							<option value="5001" data-ace-mode="c_cpp">C&#43;&#43; 20 (gcc 12.2)</option>
						
							<option value="5002" data-ace-mode="golang">Go (go 1.20.6)</option>
						
							<option value="5003" data-ace-mode="csharp">C# 11.0 (.NET 7.0.7)</option>
						
							<option value="5004" data-ace-mode="kotlin">Kotlin (Kotlin/JVM 1.8.20)</option>
						
							<option value="5005" data-ace-mode="java">Java (OpenJDK 17)</option>
						
							<option value="5006" data-ace-mode="nim">Nim (Nim 1.6.14)</option>
						
							<option value="5007" data-ace-mode="text">V (V 0.4)</option>
						
							<option value="5008" data-ace-mode="text">Zig (Zig 0.10.1)</option>
						
							<option value="5009" data-ace-mode="javascript">JavaScript (Node.js 18.16.1)</option>
						
							<option value="5010" data-ace-mode="javascript">JavaScript (Deno 1.35.1)</option>
						
							<option value="5011" data-ace-mode="r">R (GNU R 4.2.1)</option>
						
							<option value="5012" data-ace-mode="d">D (DMD 2.104.0)</option>
						
							<option value="5013" data-ace-mode="d">D (LDC 1.32.2)</option>
						
							<option value="5014" data-ace-mode="swift">Swift (swift 5.8.1)</option>
						
							<option value="5015" data-ace-mode="dart">Dart (Dart 3.0.5)</option>
						
							<option value="5016" data-ace-mode="php">PHP (php 8.2.8)</option>
						
							<option value="5017" data-ace-mode="c_cpp">C (gcc 12.2.0)</option>
						
							<option value="5018" data-ace-mode="ruby">Ruby (ruby 3.2.2)</option>
						
							<option value="5019" data-ace-mode="crystal">Crystal (Crystal 1.9.1)</option>
						
							<option value="5020" data-ace-mode="text">Brainfuck (bf 20041219)</option>
						
							<option value="5021" data-ace-mode="fsharp">F# 7.0 (.NET 7.0.7)</option>
						
							<option value="5022" data-ace-mode="julia">Julia (Julia 1.9.2)</option>
						
							<option value="5023" data-ace-mode="sh">Bash (bash 5.2.2)</option>
						
							<option value="5024" data-ace-mode="text">Text (cat 8.32)</option>
						
							<option value="5025" data-ace-mode="haskell">Haskell (GHC 9.4.5)</option>
						
							<option value="5026" data-ace-mode="fortran">Fortran (gfortran 12.2)</option>
						
							<option value="5027" data-ace-mode="lua">Lua (LuaJIT 2.1.0-beta3)</option>
						
							<option value="5028" data-ace-mode="c_cpp">C&#43;&#43; 23 (gcc 12.2)</option>
						
							<option value="5029" data-ace-mode="lisp">Common Lisp (SBCL 2.3.6)</option>
						
							<option value="5030" data-ace-mode="cobol">COBOL (Free) (GnuCOBOL 3.1.2)</option>
						
							<option value="5031" data-ace-mode="c_cpp">C&#43;&#43; 23 (Clang 16.0.6)</option>
						
							<option value="5032" data-ace-mode="sh">Zsh (Zsh 5.9)</option>
						
							<option value="5033" data-ace-mode="python">SageMath (SageMath 9.5)</option>
						
							<option value="5034" data-ace-mode="sh">Sed (GNU sed 4.8)</option>
						
							<option value="5035" data-ace-mode="text">bc (bc 1.07.1)</option>
						
							<option value="5036" data-ace-mode="text">dc (dc 1.07.1)</option>
						
							<option value="5037" data-ace-mode="perl">Perl (perl  5.34)</option>
						
							<option value="5038" data-ace-mode="sh">AWK (GNU Awk 5.0.1)</option>
						
							<option value="5039" data-ace-mode="text">なでしこ (cnako3 3.4.20)</option>
						
							<option value="5040" data-ace-mode="text">Assembly x64 (NASM 2.15.05)</option>
						
							<option value="5041" data-ace-mode="pascal">Pascal (fpc 3.2.2)</option>
						
							<option value="5042" data-ace-mode="csharp">C# 11.0 AOT (.NET 7.0.7)</option>
						
							<option value="5043" data-ace-mode="lua">Lua (Lua 5.4.6)</option>
						
							<option value="5044" data-ace-mode="prolog">Prolog (SWI-Prolog 9.0.4)</option>
						
							<option value="5045" data-ace-mode="sh">PowerShell (PowerShell 7.3.1)</option>
						
							<option value="5046" data-ace-mode="scheme">Scheme (Gauche 0.9.12)</option>
						
							<option value="5047" data-ace-mode="scala">Scala 3.3.0 (Scala Native 0.4.14)</option>
						
							<option value="5048" data-ace-mode="vbscript">Visual Basic 16.9 (.NET 7.0.7)</option>
						
							<option value="5049" data-ace-mode="text">Forth (gforth 0.7.3)</option>
						
							<option value="5050" data-ace-mode="clojure">Clojure (babashka 1.3.181)</option>
						
							<option value="5051" data-ace-mode="erlang">Erlang (Erlang 26.0.2)</option>
						
							<option value="5052" data-ace-mode="typescript">TypeScript 5.1 (Deno 1.35.1)</option>
						
							<option value="5053" data-ace-mode="c_cpp">C&#43;&#43; 17 (gcc 12.2)</option>
						
							<option value="5054" data-ace-mode="rust">Rust (rustc 1.70.0)</option>
						
							<option value="5055" data-ace-mode="python">Python (CPython 3.11.4)</option>
						
							<option value="5056" data-ace-mode="scala">Scala (Dotty 3.3.0)</option>
						
							<option value="5057" data-ace-mode="text">Koka (koka 2.4.0)</option>
						
							<option value="5058" data-ace-mode="typescript">TypeScript 5.1 (Node.js 18.16.1)</option>
						
							<option value="5059" data-ace-mode="ocaml">OCaml (ocamlopt 5.0.0)</option>
						
							<option value="5060" data-ace-mode="raku">Raku (Rakudo 2023.06)</option>
						
							<option value="5061" data-ace-mode="text">Vim (vim 9.0.0242)</option>
						
							<option value="5062" data-ace-mode="lisp">Emacs Lisp (Native Compile) (GNU Emacs 28.2)</option>
						
							<option value="5063" data-ace-mode="python">Python (Mambaforge / CPython 3.10.10)</option>
						
							<option value="5064" data-ace-mode="clojure">Clojure (clojure 1.11.1)</option>
						
							<option value="5065" data-ace-mode="text">プロデル (mono版プロデル 1.9.1182)</option>
						
							<option value="5066" data-ace-mode="text">ECLiPSe (ECLiPSe 7.1_13)</option>
						
							<option value="5067" data-ace-mode="text">Nibbles (literate form) (nibbles 1.01)</option>
						
							<option value="5068" data-ace-mode="ada">Ada (GNAT 12.2)</option>
						
							<option value="5069" data-ace-mode="text">jq (jq 1.6)</option>
						
							<option value="5070" data-ace-mode="text">Cyber (Cyber v0.2-Latest)</option>
						
							<option value="5071" data-ace-mode="clojure">Carp (Carp 0.5.5)</option>
						
							<option value="5072" data-ace-mode="c_cpp">C&#43;&#43; 17 (Clang 16.0.6)</option>
						
							<option value="5073" data-ace-mode="c_cpp">C&#43;&#43; 20 (Clang 16.0.6)</option>
						
							<option value="5074" data-ace-mode="text">LLVM IR (Clang 16.0.6)</option>
						
							<option value="5075" data-ace-mode="lisp">Emacs Lisp (Byte Compile) (GNU Emacs 28.2)</option>
						
							<option value="5076" data-ace-mode="text">Factor (Factor 0.98)</option>
						
							<option value="5077" data-ace-mode="d">D (GDC 12.2)</option>
						
							<option value="5078" data-ace-mode="python">Python (PyPy 3.10-v7.3.12)</option>
						
							<option value="5079" data-ace-mode="text">Whitespace (whitespacers 1.0.0)</option>
						
							<option value="5080" data-ace-mode="text">&gt;&lt;&gt; (fishr 0.1.0)</option>
						
							<option value="5081" data-ace-mode="ocaml">ReasonML (reason 3.9.0)</option>
						
							<option value="5082" data-ace-mode="python">Python (Cython 0.29.34)</option>
						
							<option value="5083" data-ace-mode="matlab">Octave (GNU Octave 8.2.0)</option>
						
							<option value="5084" data-ace-mode="haxe">Haxe (JVM) (Haxe 4.3.1)</option>
						
							<option value="5085" data-ace-mode="elixir">Elixir (Elixir 1.15.2)</option>
						
							<option value="5086" data-ace-mode="text">Mercury (Mercury 22.01.6)</option>
						
							<option value="5087" data-ace-mode="text">Seed7 (Seed7 3.2.1)</option>
						
							<option value="5088" data-ace-mode="lisp">Emacs Lisp (No Compile) (GNU Emacs 28.2)</option>
						
							<option value="5089" data-ace-mode="text">Unison (Unison M5b)</option>
						
							<option value="5090" data-ace-mode="cobol">COBOL (GnuCOBOL(Fixed) 3.1.2)</option>
						
					</select>
					<span class="error"></span>
				</div>
			</div>
			<script>var currentLang = getLS('defaultLang');</script>
			
			
<div class="form-group">
	<div class="col-sm-3 col-md-2 editor-label">
		<label class="control-label" for="sourceCode">ソースコード</label>
		<div class="editor-buttons">
			<button id="btn-open-file" type="button" class="btn btn-default btn-sm">
				<span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span> &nbsp; ファイルを開く
			</button>
			<button id="btn-customize" type="button" class="btn btn-default btn-sm">
				<span class="glyphicon glyphicon-cog" aria-hidden="true"></span> &nbsp; カスタマイズ
			</button>
			<button type="button" class="btn btn-default btn-sm btn-toggle-editor" data-toggle="button" autocomplete="off">
				エディタ切り替え
			</button>
			<button type="button" class="btn btn-default btn-sm btn-auto-height" data-toggle="button" autocomplete="off">
				高さ自動調節
			</button>
		</div>
	</div>
	<div class="col-sm-9 col-md-10" id="sourceCode">
		<div id="editor"></div>
		<textarea id="plain-textarea" class="form-control" style="display:none;" name="sourceCode"></textarea>
		<p>
			<span class="gray">※ 512 KiB まで</span><br>
			<span class="gray">※ ソースコードは「Main.<i>拡張子</i>」で保存されます</span>
		</p>
	</div>
	<input id="input-open-file" type="file" style="display:none;">
</div>


			<input type="hidden" name="csrf_token" value="J2bPvEpthKHT&#43;skD&#43;MByj3GLnLWRkMCq9jj51qX/U0I=" />
			<div class="form-group">
				<label class="control-label col-sm-3 col-md-2"></label>
				<div class="col-sm-5">
					
					<button type="submit" class="btn btn-primary" id="submit">提出</button>
				</div>
			</div>
		</form>
		
	</div>
</div>




		
			<hr>
			
			
			
<div class="a2a_kit a2a_kit_size_20 a2a_default_style pull-right" data-a2a-url="https://atcoder.jp/contests/ahc046/tasks/ahc046_a?lang=ja" data-a2a-title="A - Skating with Blocks">
	<a class="a2a_button_facebook"></a>
	<a class="a2a_button_twitter"></a>
	
		<a class="a2a_button_hatena"></a>
	
	<a class="a2a_dd" href="https://www.addtoany.com/share"></a>
</div>

		
		<script async src="//static.addtoany.com/menu/page.js"></script>
		
	</div> 
	<hr>
</div> 

	<div class="container" style="margin-bottom: 80px;">
			<footer class="footer">
			
				<ul>
					<li><a href="/contests/ahc046/rules">ルール</a></li>
					<li><a href="/contests/ahc046/glossary">用語集</a></li>
					
				</ul>
			
			<ul>
				<li><a href="/tos">利用規約</a></li>
				<li><a href="/privacy">プライバシーポリシー</a></li>
				<li><a href="/personal">個人情報保護方針</a></li>
				<li><a href="/company">企業情報</a></li>
				<li><a href="/faq">よくある質問</a></li>
				<li><a href="/contact">お問い合わせ</a></li>
				<li><a href="/documents/request">資料請求</a></li>
			</ul>
			<div class="text-center">
					<small id="copyright">Copyright Since 2012 &copy;<a href="http://atcoder.co.jp">AtCoder Inc.</a> All rights reserved.</small>
			</div>
			</footer>
	</div>
	<p id="fixed-server-timer" class="contest-timer"></p>
	<div id="scroll-page-top" style="display:none;"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span> ページトップ</div>

</body>
</html>


